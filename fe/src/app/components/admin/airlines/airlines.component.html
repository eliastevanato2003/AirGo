<app-navbar></app-navbar>

<div class="airlines-container">
  <div class="header">
    <div class="title-group">
      <h2>Gestione Compagnie Aeree</h2>
      <p>Qui puoi aggiungere o eliminare compagnie aeree</p>
    </div>
    <button class="add-airline-btn" (click)="showModal=true">Aggiungi compagnia</button>
  </div>

  @if(airlines) {
  <div class="airline-list">
    @for(airline of airlines; track airline.IdCompagniaAerea) {
    <div class="airline-bar">
      <div class="airline-info">
        <p><strong>Nome:</strong> {{ airline.Nome }}</p>
        <p><strong>Codice:</strong> {{ airline.CodiceIdentificativo }}</p>
        <p><strong>Email:</strong> {{ airline.Email }}</p>
      </div>
      <button class="delete-btn" (click)="deleteAirline(airline.IdCompagniaAerea)">Elimina</button>
    </div>
    }
  </div>
  }

  @if(showModal) {
  <div class="modal-overlay">
    <div class="modal-content">
      <h3>Aggiungi compagnia</h3>
      <form [formGroup]="airlineForm" (ngSubmit)="addAirline()">
        <label for="name">Nome</label>
        <input type="text" id="name" formControlName="name" required>

        <label for="code">Codice identificativo</label>
        <input type="text" id="code" formControlName="code" required>

        <label for="email">Email</label>
        <input type="email" id="email" formControlName="email" required>

        <label for="password">Password</label>
        <input type="password" id="password" formControlName="password" required>

        <div class="modal-buttons">
          <button type="submit" class="add-btn" [disabled]="airlineForm.invalid">Aggiungi</button>
          <button type="button" class="cancel-btn" (click)="closeModal()">Annulla</button>
        </div>
      </form>
    </div>
  </div>
  }
</div>

<app-footer></app-footer>