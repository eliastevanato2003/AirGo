<app-navbar></app-navbar>
<app-ticket-bar></app-ticket-bar>

<div class="container">
    <h2>Seleziona il tuo posto</h2>

    <!-- Input per il numero di biglietti -->
    <div class="ticket-quantity">
        <label for="ticketCount">Numero di biglietti:</label>
        <input type="number" id="ticketCount" name="ticketCount" [(ngModel)]="ticketCount" min="1" max="10"
            (input)="onTicketCountChange()" />
    </div>

    <div class="seat-map">
        <!-- Prima classe (First Class) -->
        <div class="seat firstclass" [ngClass]="{'selected': getSeat(0, '0')?.selected}"
            (click)="selectSeat(getSeat(0, '0')!)">
            Prima classe
        </div>

        <!-- Business + Economy (dinamico in base ai posti) -->
        <div *ngFor="let rowGroup of groupedSeats" class="seat-row">
            @if(rowGroup.seats[0].id !== '00') {
            <!-- Lato sinistro (A, B, C) -->
            <div *ngFor="let seat of rowGroup.seats.slice(0, rowGroup.seats.length/2)" class="seat" [ngClass]="{
                  'business': seat.type === 'business',
                  'economy': seat.type === 'economy',
                  'selected': seat.selected
                }" (click)="selectSeat(seat)">
                {{ seat.row }}{{ seat.column }}
            </div>

            <!-- Corridoio -->
            <div class="aisle-space"></div>

            <!-- Lato destro (D, E, F) -->
            <div *ngFor="let seat of rowGroup.seats.slice(rowGroup.seats.length/2, rowGroup.seats.length)" class="seat" [ngClass]="{
                  'business': seat.type === 'business',
                  'economy': seat.type === 'economy',
                  'selected': seat.selected
                }" (click)="selectSeat(seat)">
                {{ seat.row }}{{ seat.column }}
            </div>
            }
        </div>

        <!-- Etichette per le classi -->
        <div class="labels">
            <div class="business-label">Business</div>
            <div class="economy-label">Economy</div>
        </div>
    </div>

    <button type="submit" class="submit-button" (click)="submit()">Continua</button>
</div>

<app-footer></app-footer>